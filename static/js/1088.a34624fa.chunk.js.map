{"version":3,"file":"static/js/1088.a34624fa.chunk.js","mappings":"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","sources":["../../../node_modules/@ledgerhq/devices/lib/hid-framing.js","../../../node_modules/@ledgerhq/logs/lib-es/index.js","../../../node_modules/@ledgerhq/hw-transport-webhid/node_modules/@ledgerhq/hw-transport/lib-es/Transport.js","../../../node_modules/@ledgerhq/devices/lib-es/index.js","../../../node_modules/@ledgerhq/hw-transport-webhid/lib-es/TransportWebHID.js"],"sourcesContent":["\"use strict\";exports.__esModule=!0;var errors_1=require(\"@ledgerhq/errors\"),Tag=5;function asUInt16BE(value){var b=Buffer.alloc(2);return b.writeUInt16BE(value,0),b}var initialAcc={data:Buffer.alloc(0),dataLength:0,sequence:0},createHIDframing=function(channel,packetSize){return{makeBlocks:function(apdu){var data=Buffer.concat([asUInt16BE(apdu.length),apdu]),blockSize=packetSize-5,nbBlocks=Math.ceil(data.length/blockSize);data=Buffer.concat([data,Buffer.alloc(nbBlocks*blockSize-data.length+1).fill(0)]);for(var blocks=[],i=0;i<nbBlocks;i++){var head=Buffer.alloc(5);head.writeUInt16BE(channel,0),head.writeUInt8(Tag,2),head.writeUInt16BE(i,3);var chunk=data.slice(i*blockSize,(i+1)*blockSize);blocks.push(Buffer.concat([head,chunk]))}return blocks},reduceResponse:function(acc,chunk){var _a=acc||initialAcc,data=_a.data,dataLength=_a.dataLength,sequence=_a.sequence;if(chunk.readUInt16BE(0)!==channel)throw new errors_1.TransportError(\"Invalid channel\",\"InvalidChannel\");if(chunk.readUInt8(2)!==Tag)throw new errors_1.TransportError(\"Invalid tag\",\"InvalidTag\");if(chunk.readUInt16BE(3)!==sequence)throw new errors_1.TransportError(\"Invalid sequence\",\"InvalidSequence\");acc||(dataLength=chunk.readUInt16BE(5)),sequence++;var chunkData=chunk.slice(acc?5:7);return(data=Buffer.concat([data,chunkData])).length>dataLength&&(data=data.slice(0,dataLength)),{data:data,dataLength:dataLength,sequence:sequence}},getReducedResult:function(acc){if(acc&&acc.dataLength===acc.data.length)return acc.data}}};exports.default=createHIDframing;","let id=0;const subscribers=[];export const log=(type,message,data)=>{const obj={type:type,id:String(++id),date:new Date};message&&(obj.message=message),data&&(obj.data=data),dispatch(obj)};export const trace=({type:type,message:message,data:data,context:context})=>{const obj={type:type,id:String(++id),date:new Date};message&&(obj.message=message),data&&(obj.data=data),context&&(obj.context=context),dispatch(obj)};export class LocalTracer{constructor(type,context){this.type=type,this.context=context}trace(message,data){trace({type:this.type,message:message,data:data,context:this.context})}getContext(){return this.context}setContext(context){this.context=context}updateContext(contextToAdd){this.context=Object.assign(Object.assign({},this.context),contextToAdd)}getType(){return this.type}setType(type){this.type=type}withType(type){return new LocalTracer(type,this.context)}withContext(context){return new LocalTracer(this.type,context)}withUpdatedContext(contextToAdd){return new LocalTracer(this.type,Object.assign(Object.assign({},this.context),contextToAdd))}}export const listen=cb=>(subscribers.push(cb),()=>{const i=subscribers.indexOf(cb);-1!==i&&(subscribers[i]=subscribers[subscribers.length-1],subscribers.pop())});function dispatch(log){for(let i=0;i<subscribers.length;i++)try{subscribers[i](log)}catch(e){console.error(e)}}\"undefined\"!=typeof window&&(window.__ledgerLogsListen=listen);","var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};import EventEmitter from\"events\";import{TransportRaceCondition,TransportError,StatusCodes,getAltStatusMessage,TransportStatusError}from\"@ledgerhq/errors\";import{LocalTracer}from\"@ledgerhq/logs\";export{TransportError,TransportStatusError,StatusCodes,getAltStatusMessage};const DEFAULT_LOG_TYPE=\"transport\";class Transport{constructor({context:context,logType:logType}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new EventEmitter,this.send=(cla_1,ins_1,p1_1,p2_1,...args_1)=>__awaiter(this,[cla_1,ins_1,p1_1,p2_1,...args_1],void 0,(function*(cla,ins,p1,p2,data=Buffer.alloc(0),statusList=[StatusCodes.OK],{abortTimeoutMs:abortTimeoutMs}={}){const tracer=this.tracer.withUpdatedContext({function:\"send\"});if(data.length>=256)throw tracer.trace(\"data.length exceeded 256 bytes limit\",{dataLength:data.length}),new TransportError(\"data.length exceed 256 bytes limit. Got: \"+data.length,\"DataLengthTooBig\");tracer.trace(\"Starting an exchange\",{abortTimeoutMs:abortTimeoutMs});const response=yield this.exchange(Buffer.concat([Buffer.from([cla,ins,p1,p2]),Buffer.from([data.length]),data]),{abortTimeoutMs:abortTimeoutMs});tracer.trace(\"Received response from exchange\");const sw=response.readUInt16BE(response.length-2);if(!statusList.some((s=>s===sw)))throw new TransportStatusError(sw);return response})),this._appAPIlock=null,this.tracer=new LocalTracer(null!=logType?logType:\"transport\",context)}exchange(_apdu,{abortTimeoutMs:_abortTimeoutMs}={}){throw new Error(\"exchange not implemented\")}exchangeBulk(apdus,observer){let unsubscribed=!1;return(()=>__awaiter(this,void 0,void 0,(function*(){if(!unsubscribed)for(const apdu of apdus){const r=yield this.exchange(apdu);if(unsubscribed)return;const status=r.readUInt16BE(r.length-2);if(status!==StatusCodes.OK)throw new TransportStatusError(status);observer.next(r)}})))().then((()=>!unsubscribed&&observer.complete()),(e=>!unsubscribed&&observer.error(e))),{unsubscribe:()=>{unsubscribed=!0}}}setScrambleKey(_key){}close(){return Promise.resolve()}on(eventName,cb){this._events.on(eventName,cb)}off(eventName,cb){this._events.removeListener(eventName,cb)}emit(event,...args){this._events.emit(event,...args)}setDebugMode(){console.warn(\"setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.\")}setExchangeTimeout(exchangeTimeout){this.exchangeTimeout=exchangeTimeout}setExchangeUnresponsiveTimeout(unresponsiveTimeout){this.unresponsiveTimeout=unresponsiveTimeout}static create(openTimeout=3e3,listenTimeout){return new Promise(((resolve,reject)=>{let found=!1;const sub=this.listen({next:e=>{found=!0,sub&&sub.unsubscribe(),listenTimeoutId&&clearTimeout(listenTimeoutId),this.open(e.descriptor,openTimeout).then(resolve,reject)},error:e=>{listenTimeoutId&&clearTimeout(listenTimeoutId),reject(e)},complete:()=>{listenTimeoutId&&clearTimeout(listenTimeoutId),found||reject(new TransportError(this.ErrorMessage_NoDeviceFound,\"NoDeviceFound\"))}}),listenTimeoutId=listenTimeout?setTimeout((()=>{sub.unsubscribe(),reject(new TransportError(this.ErrorMessage_ListenTimeout,\"ListenTimeout\"))}),listenTimeout):null}))}exchangeAtomicImpl(f){return __awaiter(this,void 0,void 0,(function*(){const tracer=this.tracer.withUpdatedContext({function:\"exchangeAtomicImpl\",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw tracer.trace(\"Atomic exchange is already busy\"),new TransportRaceCondition(\"An action was already pending on the Ledger device. Please deny or reconnect.\");let resolveBusy;const busyPromise=new Promise((r=>{resolveBusy=r}));this.exchangeBusyPromise=busyPromise;let unresponsiveReached=!1;const timeout=setTimeout((()=>{tracer.trace('Timeout reached, emitting Transport event \"unresponsive\"',{unresponsiveTimeout:this.unresponsiveTimeout}),unresponsiveReached=!0,this.emit(\"unresponsive\")}),this.unresponsiveTimeout);try{const res=yield f();return unresponsiveReached&&(tracer.trace(\"Device was unresponsive, emitting responsive\"),this.emit(\"responsive\")),res}finally{tracer.trace(\"Finalize, clearing busy guard\"),clearTimeout(timeout),resolveBusy&&resolveBusy(),this.exchangeBusyPromise=null}}))}decorateAppAPIMethods(self,methods,scrambleKey){for(const methodName of methods)self[methodName]=this.decorateAppAPIMethod(methodName,self[methodName],self,scrambleKey)}decorateAppAPIMethod(methodName,f,ctx,scrambleKey){return(...args)=>__awaiter(this,void 0,void 0,(function*(){const{_appAPIlock:_appAPIlock}=this;if(_appAPIlock)return Promise.reject(new TransportError(\"Ledger Device is busy (lock \"+_appAPIlock+\")\",\"TransportLocked\"));try{return this._appAPIlock=methodName,this.setScrambleKey(scrambleKey),yield f.apply(ctx,args)}finally{this._appAPIlock=null}}))}setTraceContext(context){this.tracer=this.tracer.withContext(context)}updateTraceContext(contextToAdd){this.tracer.updateContext(contextToAdd)}getTraceContext(){return this.tracer.getContext()}}Transport.ErrorMessage_ListenTimeout=\"No Ledger device found (timeout)\",Transport.ErrorMessage_NoDeviceFound=\"No Ledger device found\";export default Transport;","var _a,__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};import semver from\"semver\";export var IIGenericHID=1;export var IIKeyboardHID=2;export var IIU2F=4;export var IICCID=8;export var IIWebUSB=16;export var DeviceModelId;!function(DeviceModelId){DeviceModelId.blue=\"blue\",DeviceModelId.nanoS=\"nanoS\",DeviceModelId.nanoSP=\"nanoSP\",DeviceModelId.nanoX=\"nanoX\",DeviceModelId.nanoFTS=\"nanoFTS\"}(DeviceModelId||(DeviceModelId={}));var devices=((_a={})[DeviceModelId.blue]={id:DeviceModelId.blue,productName:\"Ledger Blue\",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:function(_firwareVersion){return 4096}},_a[DeviceModelId.nanoS]={id:DeviceModelId.nanoS,productName:\"Ledger Nano S\",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:function(firmwareVersion){var _a;return semver.lt(null!==(_a=semver.coerce(firmwareVersion))&&void 0!==_a?_a:\"\",\"2.0.0\")?4096:2048}},_a[DeviceModelId.nanoSP]={id:DeviceModelId.nanoSP,productName:\"Ledger Nano S Plus\",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1572864,masks:[856686592],getBlockSize:function(_firmwareVersion){return 32}},_a[DeviceModelId.nanoX]={id:DeviceModelId.nanoX,productName:\"Ledger Nano X\",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:function(_firwareVersion){return 4096},bluetoothSpec:[{serviceUuid:\"13d63400-2c97-0004-0000-4c6564676572\",notifyUuid:\"13d63400-2c97-0004-0001-4c6564676572\",writeUuid:\"13d63400-2c97-0004-0002-4c6564676572\",writeCmdUuid:\"13d63400-2c97-0004-0003-4c6564676572\"}]},_a[DeviceModelId.nanoFTS]={id:DeviceModelId.nanoFTS,productName:\"Ledger Nano FTS\",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2097152,masks:[857735168],getBlockSize:function(_firwareVersion){return 4096},bluetoothSpec:[{serviceUuid:\"13d63400-2c97-6004-0000-4c6564676572\",notifyUuid:\"13d63400-2c97-6004-0001-4c6564676572\",writeUuid:\"13d63400-2c97-6004-0002-4c6564676572\",writeCmdUuid:\"13d63400-2c97-6004-0003-4c6564676572\"}]},_a),productMap={Blue:DeviceModelId.blue,\"Nano S\":DeviceModelId.nanoS,\"Nano S Plus\":DeviceModelId.nanoSP,\"Nano X\":DeviceModelId.nanoX,\"Nano FTS\":DeviceModelId.nanoFTS},devicesList=Object.values(devices);export var ledgerUSBVendorId=11415;export var getDeviceModel=function(id){var info=devices[id];if(!info)throw new Error(\"device '\"+id+\"' does not exist\");return info};export var identifyTargetId=function(targetId){var deviceModel=devicesList.find((function(_a){return _a.masks.find((function(mask){return(4294901760&targetId)===mask}))}));return deviceModel};export var identifyUSBProductId=function(usbProductId){var legacy=devicesList.find((function(d){return d.legacyUsbProductId===usbProductId}));if(legacy)return legacy;var mm=usbProductId>>8;return devicesList.find((function(d){return d.productIdMM===mm}))};export var identifyProductName=function(productName){return devicesList.find((function(d){return d.id===productMap[productName]}))};var bluetoothServices=[],serviceUuidToInfos={};for(var id in devices){var deviceModel=devices[id],bluetoothSpec=deviceModel.bluetoothSpec;if(bluetoothSpec)for(var i=0;i<bluetoothSpec.length;i++){var spec=bluetoothSpec[i];bluetoothServices.push(spec.serviceUuid),serviceUuidToInfos[spec.serviceUuid]=serviceUuidToInfos[spec.serviceUuid.replace(/-/g,\"\")]=__assign({deviceModel:deviceModel},spec)}}export var getBluetoothServiceUuids=function(){return bluetoothServices};export var getInfosForServiceUuid=function(uuid){return serviceUuidToInfos[uuid.toLowerCase()]};","var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if(\"function\"!=typeof b&&null!==b)throw new TypeError(\"Class extends value \"+String(b)+\" is not a constructor or null\");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},\"function\"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError(\"Generator is already executing.\");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=this&&this.__read||function(o,n){var m=\"function\"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};import Transport from\"@ledgerhq/hw-transport\";import hidFraming from\"@ledgerhq/devices/lib/hid-framing\";import{identifyUSBProductId,ledgerUSBVendorId}from\"@ledgerhq/devices\";import{log}from\"@ledgerhq/logs\";import{TransportOpenUserCancelled,DisconnectedDeviceDuringOperation,DisconnectedDevice,TransportError}from\"@ledgerhq/errors\";var ledgerDevices=[{vendorId:ledgerUSBVendorId}],isSupported=function(){return Promise.resolve(!(!window.navigator||!window.navigator.hid))},getHID=function(){var hid=navigator.hid;if(!hid)throw new TransportError(\"navigator.hid is not supported\",\"HIDNotSupported\");return hid};function requestLedgerDevices(){return __awaiter(this,void 0,void 0,(function(){var device;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,getHID().requestDevice({filters:ledgerDevices})];case 1:return device=_a.sent(),Array.isArray(device)?[2,device]:[2,[device]]}}))}))}function getLedgerDevices(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,getHID().getDevices()];case 1:return[2,_a.sent().filter((function(d){return d.vendorId===ledgerUSBVendorId}))]}}))}))}function getFirstLedgerDevice(){return __awaiter(this,void 0,void 0,(function(){var existingDevices;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,getLedgerDevices()];case 1:return(existingDevices=_a.sent()).length>0?[2,existingDevices[0]]:[4,requestLedgerDevices()];case 2:return[2,_a.sent()[0]]}}))}))}var TransportWebHID=function(_super){function TransportWebHID(device){var _this=_super.call(this)||this;return _this.channel=Math.floor(65535*Math.random()),_this.packetSize=64,_this.inputs=[],_this.read=function(){return _this.inputs.length?Promise.resolve(_this.inputs.shift()):new Promise((function(success){_this.inputCallback=success}))},_this.onInputReport=function(e){var buffer=Buffer.from(e.data.buffer);_this.inputCallback?(_this.inputCallback(buffer),_this.inputCallback=null):_this.inputs.push(buffer)},_this._disconnectEmitted=!1,_this._emitDisconnect=function(e){_this._disconnectEmitted||(_this._disconnectEmitted=!0,_this.emit(\"disconnect\",e))},_this.exchange=function(apdu){return __awaiter(_this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.exchangeAtomicImpl((function(){return __awaiter(_this,void 0,void 0,(function(){var _a,channel,packetSize,framing,blocks,i,result,acc,buffer;return __generator(this,(function(_b){switch(_b.label){case 0:channel=(_a=this).channel,packetSize=_a.packetSize,log(\"apdu\",\"=> \"+apdu.toString(\"hex\")),framing=hidFraming(channel,packetSize),blocks=framing.makeBlocks(apdu),i=0,_b.label=1;case 1:return i<blocks.length?[4,this.device.sendReport(0,blocks[i])]:[3,4];case 2:_b.sent(),_b.label=3;case 3:return i++,[3,1];case 4:return(result=framing.getReducedResult(acc))?[3,6]:[4,this.read()];case 5:return buffer=_b.sent(),acc=framing.reduceResponse(acc,buffer),[3,4];case 6:return log(\"apdu\",\"<= \"+result.toString(\"hex\")),[2,result]}}))}))})).catch((function(e){if(e&&e.message&&e.message.includes(\"write\"))throw _this._emitDisconnect(e),new DisconnectedDeviceDuringOperation(e.message);throw e}))];case 1:return[2,_a.sent()]}}))}))},_this.device=device,_this.deviceModel=\"number\"==typeof device.productId?identifyUSBProductId(device.productId):void 0,device.addEventListener(\"inputreport\",_this.onInputReport),_this}return __extends(TransportWebHID,_super),TransportWebHID.request=function(){return __awaiter(this,void 0,void 0,(function(){var _a,device;return __generator(this,(function(_b){switch(_b.label){case 0:return[4,requestLedgerDevices()];case 1:return _a=__read.apply(void 0,[_b.sent(),1]),device=_a[0],[2,TransportWebHID.open(device)]}}))}))},TransportWebHID.openConnected=function(){return __awaiter(this,void 0,void 0,(function(){var devices;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,getLedgerDevices()];case 1:return 0===(devices=_a.sent()).length?[2,null]:[2,TransportWebHID.open(devices[0])]}}))}))},TransportWebHID.open=function(device){return __awaiter(this,void 0,void 0,(function(){var transport,onDisconnect;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,device.open()];case 1:return _a.sent(),transport=new TransportWebHID(device),onDisconnect=function(e){device===e.device&&(getHID().removeEventListener(\"disconnect\",onDisconnect),transport._emitDisconnect(new DisconnectedDevice))},getHID().addEventListener(\"disconnect\",onDisconnect),[2,transport]}}))}))},TransportWebHID.prototype.close=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.exchangeBusyPromise];case 1:return _a.sent(),this.device.removeEventListener(\"inputreport\",this.onInputReport),[4,this.device.close()];case 2:return _a.sent(),[2]}}))}))},TransportWebHID.prototype.setScrambleKey=function(){},TransportWebHID.isSupported=isSupported,TransportWebHID.list=getLedgerDevices,TransportWebHID.listen=function(observer){var unsubscribed=!1;return getFirstLedgerDevice().then((function(device){if(device){if(!unsubscribed){var deviceModel=\"number\"==typeof device.productId?identifyUSBProductId(device.productId):void 0;observer.next({type:\"add\",descriptor:device,deviceModel:deviceModel}),observer.complete()}}else observer.error(new TransportOpenUserCancelled(\"Access denied to use Ledger device\"))}),(function(error){observer.error(new TransportOpenUserCancelled(error.message))})),{unsubscribe:function(){unsubscribed=!0}}},TransportWebHID}(Transport);export default TransportWebHID;"],"names":["errors_1","asUInt16BE","value","b","Buffer","alloc","writeUInt16BE","initialAcc","data","dataLength","sequence","exports","channel","packetSize","makeBlocks","apdu","concat","length","blockSize","nbBlocks","Math","ceil","fill","blocks","i","head","writeUInt8","chunk","slice","push","reduceResponse","acc","_a","readUInt16BE","TransportError","readUInt8","chunkData","getReducedResult","id","subscribers","log","type","message","obj","String","date","Date","dispatch","LocalTracer","constructor","context","this","trace","getContext","setContext","updateContext","contextToAdd","Object","assign","getType","setType","withType","withContext","withUpdatedContext","e","console","error","window","__ledgerLogsListen","cb","indexOf","pop","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","throw","result","done","then","apply","Transport","logType","exchangeTimeout","unresponsiveTimeout","deviceModel","_events","send","cla_1","ins_1","p1_1","p2_1","args_1","cla","ins","p1","p2","statusList","StatusCodes","OK","abortTimeoutMs","tracer","function","response","exchange","from","sw","some","s","TransportStatusError","_appAPIlock","_apdu","_abortTimeoutMs","Error","exchangeBulk","apdus","observer","unsubscribed","r","status","complete","unsubscribe","setScrambleKey","_key","close","on","eventName","off","removeListener","emit","event","args","setDebugMode","warn","setExchangeTimeout","setExchangeUnresponsiveTimeout","create","openTimeout","listenTimeout","found","sub","listen","listenTimeoutId","clearTimeout","open","descriptor","ErrorMessage_NoDeviceFound","setTimeout","ErrorMessage_ListenTimeout","exchangeAtomicImpl","f","exchangeBusyPromise","TransportRaceCondition","resolveBusy","busyPromise","unresponsiveReached","timeout","res","decorateAppAPIMethods","self","methods","scrambleKey","methodName","decorateAppAPIMethod","ctx","setTraceContext","updateTraceContext","getTraceContext","DeviceModelId","__assign","t","n","arguments","p","prototype","hasOwnProperty","call","blue","nanoS","nanoSP","nanoX","nanoFTS","devices","productName","productIdMM","legacyUsbProductId","usbOnly","memorySize","masks","getBlockSize","_firwareVersion","firmwareVersion","_firmwareVersion","bluetoothSpec","serviceUuid","notifyUuid","writeUuid","writeCmdUuid","devicesList","values","ledgerUSBVendorId","identifyUSBProductId","usbProductId","legacy","find","d","mm","bluetoothServices","serviceUuidToInfos","spec","replace","__extends","extendStatics","setPrototypeOf","__proto__","Array","TypeError","__","__generator","body","y","g","_","label","sent","trys","ops","verb","return","Symbol","iterator","v","op","__read","o","m","ar","ledgerDevices","vendorId","isSupported","navigator","hid","getHID","requestLedgerDevices","device","requestDevice","filters","isArray","getLedgerDevices","getDevices","filter","TransportWebHID","_super","_this","floor","random","inputs","read","shift","success","inputCallback","onInputReport","buffer","_disconnectEmitted","_emitDisconnect","framing","_b","toString","sendReport","catch","includes","DisconnectedDeviceDuringOperation","productId","addEventListener","request","openConnected","transport","onDisconnect","removeEventListener","DisconnectedDevice","list","existingDevices","getFirstLedgerDevice","TransportOpenUserCancelled"],"sourceRoot":""}